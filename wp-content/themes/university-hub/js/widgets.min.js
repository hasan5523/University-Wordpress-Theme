var custom_theme_file_frame;jQuery(function($){jQuery(document).on("click","input.select-img",function(event){var $this=$(this);event.preventDefault();var CustomThemeImage=wp.media.controller.Library.extend({defaults:_.defaults({id:"custom-theme-insert-image",title:$this.data("uploader_title"),allowLocalEdits:!1,displaySettings:!0,displayUserSettings:!1,multiple:!1,library:wp.media.query({type:"image"})},wp.media.controller.Library.prototype.defaults)});custom_theme_file_frame=wp.media.frames.custom_theme_file_frame=wp.media({button:{text:jQuery(this).data("uploader_button_text")},state:"custom-theme-insert-image",states:[new CustomThemeImage],multiple:!1}),custom_theme_file_frame.on("select",function(){var state=custom_theme_file_frame.state("custom-theme-insert-image"),selection=state.get("selection"),display=state.display(selection.first()).toJSON(),obj_attachment=selection.first().toJSON();display=wp.media.string.props(display,obj_attachment);var image_field=$this.siblings(".img"),imgurl=display.src;image_field.val(imgurl),image_field.trigger("change");var image_preview_wrap=$this.siblings(".image-preview-wrap"),image_html='<img src="'+imgurl+'" alt="" style="max-width:100%;max-height:200px;" />';image_preview_wrap.html(image_html);var image_remove_button=$this.siblings(".btn-image-remove");image_remove_button.css("display","inline-block")}),custom_theme_file_frame.open()}),jQuery(document).on("click","input.btn-image-remove",function(e){e.preventDefault();var $this=$(this),image_field=$this.siblings(".img");image_field.val("");var image_preview_wrap=$this.siblings(".image-preview-wrap");image_preview_wrap.html(""),$this.css("display","none"),image_field.trigger("change")})});